document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("btn-geolocation"),o=document.getElementById("cp"),t=document.querySelector(".google-map");function s(e){let s=e.coords.latitude,a=e.coords.longitude;console.log(`Latitude : ${s}, Longitude : ${a}`),fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${s}&lon=${a}`).then(e=>e.json()).then(e=>{if(console.log(e),e.address&&e.address.postcode){let n=e.address.postcode;o.value=n,console.log(`Code postal : ${n}`)}else alert("Impossible d'obtenir le code postal \xe0 Ã  partir de la position.");t.src=`https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d43114.71689098716!2d${a}!3d${s}!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sfr!2sfr!4v1711764725539!5m2!1sfr!2sfr`}).catch(e=>console.error("Erreur:",e))}function a(e){switch(e.code){case e.PERMISSION_DENIED:alert("L'utilisateur a refuser\xe9 la demande de g\xe9olocalisation.");break;case e.POSITION_UNAVAILABLE:alert("Les informations de localisation sont indisponibles.");break;case e.TIMEOUT:alert("La demande de g\xe9olocalisation a expir\xe9.");break;case e.UNKNOWN_ERROR:alert("Une erreur inconnue s'est produite.")}}e.addEventListener("click ",function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(s,a):alert("La g\xe9olocalisation n'est pas support\xe9e par ce navigateur.")})});